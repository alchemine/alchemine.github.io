---
title: PostgreSQL Notes
tags: Database
---

# Remarks
본 글은 [Learn PostgreSQL Tutorial - Full Course for Beginners (freeCodeCamp.org)](https://youtu.be/qw--VYLpxG4?si=_ePF2WRyxboaWAIJ)을 참고하여 작성되었습니다.

<!--more-->
---


# 1. Install
## 1.1 Docker
```
$ docker pull
$ docker run -d -p 5432:5432 -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD="1234" --name postgres postgres -v /workspace:/workspace
```


# 2. Run
```
$ docker exec --user='root' -it postgres bash
```


# 3. Connect to database
```
$ su - postgres
$ psql
$ psql test  # connect to 'test' database
```


# 4. DDL
## Notations
```
$: command in bash shell
#: command in postgres shell
CAPITAL: reserved words
```

## Create database
```
CREATE DATABASE test;
```

## Remove database
```
DROP DATABASE test;
```

## List databases
```
$ psql -l
# \l
```

## Connect to another database
```
# \c test
```

## Create table
```
CREATE TABLE table_name (
  column name + data type + constraints if any
)

CREATE TABLE person (
  id int,
  first_name VARCHAR(50),
  last_name VARCHAR(50),
  gender VARCHAR(7),
  date_of_birth DATE
);

CREATE TABLE person (
  id BIGSERIAL NOT NULL PRIMARY KEY,  /* BIGSERIAL: autoincrementing 8 bytes integer */
  first_name VARCHAR(50) NOT NULL,
  last_name VARCHAR(50) NOT NULL,
  gender VARCHAR(7) NOT NULL,
  date_of_birth DATE NOT NULL,
  email VARCHAR(150)
);
```

## Delete table
```
# DROP TABLE test;
```

## List tables
```
# \d   /* with sequence */
# \dt  /* without sequence */
```

## Describe table
```
# \d person
```

## Insert into table
```
INSERT INTO person (
  first_name,
  last_name,
  gender,
  date_of_birth)
VALUES ('Anne', 'Smith', 'FEMALE', DATE '1988-01-09');

INSERT INTO person (
  first_name,
  last_name,
  gender,
  date_of_birth,
  email)
VALUES ('Jake', 'Jones', 'MALE', DATE '1990-01-10', 'jake@gmail.com');
```

## Data generator (mockaroo)
[mockaroo.com](mockaroo.com)

## Execute SQL from file
```
# \i /workspace/sql/person.sql
```


# 5. DML
기본적으로는 [MySQL query](https://alchemine.github.io/2023/07/13/mysql-notes.html)와 유사하므로, MySQL과 비교하여 주요한 특이점을 기술한다.

## LIMIT, OFFSET, FETCH
```
SELECT * FROM table LIMIT 5;  /* ID: [1, 5] */
SELECT * FROM table FETCH FIRST 5 ROWS ONLY;  /* ID: [1, 5] */
SELECT * FROM table OFFSET 5 LIMIT 5;  /* ID: [6, 10] */
```

# LIKE
동일하게 wildcard (`%, _`) 사용가능
